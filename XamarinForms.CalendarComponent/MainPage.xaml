<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://xamarin.com/schemas/2014/forms" xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:components="clr-namespace:XamarinForms.CalendarComponent.Components;assembly=XamarinForms.CalendarComponent"
             xmlns:ios="clr-namespace:Xamarin.Forms.PlatformConfiguration.iOSSpecific;assembly=Xamarin.Forms.Core"
             ios:Page.UseSafeArea="true"
             x:Class="XamarinForms.CalendarComponent.MainPage">

    <ContentPage.Resources>
        
        <ControlTemplate x:Key="WeekDayControlTemplate">
            <Label Text="{TemplateBinding DayOfWeek}"/>
        </ControlTemplate>
        
        <ControlTemplate x:Key="DayControlTemplate">
            <Label Text="{TemplateBinding Date, StringFormat='{0:dd}'}"
                   TextColor="Blue" />
        </ControlTemplate>
        
        <ControlTemplate x:Key="DayControlTemplate2">
            <StackLayout>
                <Label Text="{TemplateBinding Date, StringFormat='{0:dd}'}"
                       TextColor="Brown" />
                <Label Text="{TemplateBinding BindingContext}"
                       FontSize="Micro"
                       TextColor="Black"/>
            </StackLayout>
        </ControlTemplate>
        
    </ContentPage.Resources>
    
    <StackLayout x:Name="StackLayout">

        <components:DayControl Date="04/17/04"
                               ControlTemplate="{StaticResource DayControlTemplate}"/>

        <components:CalendarControl x:Name="CalendarControl"
                                    DayAdded="CalendarControl_OnDayAdded"
                                    Date="01/01/21"
                                    DayTapped="CalendarControl_OnDayTapped"
                                    DayControlTemplate="{StaticResource DayControlTemplate}"
                                    WeekDayHeaderControlTemplate="{StaticResource WeekDayControlTemplate}"/>
        
        <StackLayout VerticalOptions="EndAndExpand">
            
            <Label Text="{Binding Date, Source={x:Reference CalendarControl}, StringFormat='Current month: {0}'}"/>
            
            <Button Text="previous month"
                    Clicked="ButtonPreviousMonth_OnClicked"/>
            
            <Button Text="next month"
                    Clicked="ButtonNextMonth_OnClicked"/>
        </StackLayout>
    </StackLayout>
    
</ContentPage>